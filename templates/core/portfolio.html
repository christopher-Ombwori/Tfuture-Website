{% extends 'base.html' %}
{% load static %}

{% block title %}Portfolio - TFuture Designs{% endblock %}

{% block content %}
<div class="min-h-screen bg-primary relative overflow-hidden">
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 bg-gradient-to-br from-blue-900/5 via-[#0A0F1C] to-purple-900/5"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(59,130,246,0.05),transparent_70%)] animate-pulse-slow"></div>
    
    <!-- Animated Grid -->
    <div class="animated-grid"></div>

    <!-- Floating Particles -->
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Glowing Orbs -->
    <div class="glow-orb"></div>
    <div class="glow-orb"></div>

    <!-- Hero Section -->
    <section class="relative min-h-[70vh] pt-16 flex items-center overflow-hidden">
        <!-- Background elements -->
        <div class="absolute inset-0 bg-blue-900/30 overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/40 via-transparent to-purple-900/40"></div>
            <div class="absolute w-full h-full opacity-20 bg-[radial-gradient(circle_at_30%_50%,rgba(139,92,246,0.3),transparent_40%),radial-gradient(circle_at_70%_70%,rgba(14,165,233,0.3),transparent_40%)]"></div>
        </div>

        <!-- Animated Photos -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="swipe-photos">
                <div class="swipe-photo" style="--delay: 0s; --direction: 1; --scale: 1.1;">
                    <img src="{% static 'images/hero-about.jpg' %}" alt="Portfolio 1" class="w-full h-full object-cover">
                </div>
                <div class="swipe-photo" style="--delay: 2s; --direction: -1; --scale: 1.2;">
                    <img src="{% static 'images/rebrand.jpg' %}" alt="Portfolio 2" class="w-full h-full object-cover">
                </div>
                <div class="swipe-photo" style="--delay: 4s; --direction: 1; --scale: 1.15;">
                    <img src="{% static 'images/hero.jpg' %}" alt="Portfolio 3" class="w-full h-full object-cover">
                </div>
                <div class="swipe-photo" style="--delay: 6s; --direction: -1; --scale: 1.25;">
                    <img src="{% static 'images/summit.jpg' %}" alt="Portfolio 4" class="w-full h-full object-cover">
                </div>
                <div class="swipe-photo" style="--delay: 8s; --direction: 1; --scale: 1.18;">
                    <img src="{% static 'images/events.jpeg' %}" alt="Portfolio 5" class="w-full h-full object-cover">
                </div>
            </div>
        </div>

        <!-- Content with Parallax Effect -->
        <div class="container mx-auto px-4 relative z-40 py-10 md:py-16">
            <div class="max-w-3xl mx-auto text-center parallax-content">
                <h1 class="font-display text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight mb-6 parallax-text">
                    Our <span class="text-gradient">Portfolio</span>
                </h1>
                <p class="text-lg text-gray-300 mb-8 parallax-text">
                    Discover how we've helped brands transform their presence and create unforgettable experiences.
                </p>
            </div>
        </div>
    </section>

    <!-- Portfolio Grid -->
    <section class="py-16 relative">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="max-w-[90rem] mx-auto">
                <!-- Filter Buttons -->
                <div class="flex flex-wrap justify-center gap-4 mb-12">
                    <button class="filter-btn px-6 py-2 rounded-full bg-accent/10 hover:bg-accent/20 text-accent transition-all" data-filter="brand-identity">Brand & Visual Identity</button>
                    <button class="filter-btn px-6 py-2 rounded-full bg-accent/10 hover:bg-accent/20 text-accent transition-all" data-filter="communication-kits">Company Communication Kits</button>
                    <button class="filter-btn px-6 py-2 rounded-full bg-accent/10 hover:bg-accent/20 text-accent transition-all" data-filter="events">Events Experience</button>
                    <button class="filter-btn px-6 py-2 rounded-full bg-accent/10 hover:bg-accent/20 text-accent transition-all" data-filter="rollouts">Rollouts & Merchandise</button>
                    <button class="filter-btn active px-6 py-2 rounded-full bg-accent/10 hover:bg-accent/20 text-accent transition-all" data-filter="all">All</button>
                </div>

                <!-- Subcategory Filters -->
                <div id="brand-subcategories" class="flex flex-wrap justify-center gap-4 mb-8 hidden">
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="full-brand">Full Brand Identity</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="visual-identity">Visual Identity</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="logofolio">Logofolio</button>
                </div>

                <div id="communication-subcategories" class="flex flex-wrap justify-center gap-4 mb-8 hidden">
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="company-profiles">Company Profiles</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="presentations">Presentations</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="internal-coms">Internal Coms & SOPs</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="stationery">Stationery</button>
                    <button class="sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all" data-subfilter="social-media">Social Media Kits</button>
                </div>

                <!-- Portfolio Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {% for project in projects %}
                    <div class="portfolio-item fade-in-up" data-category="{{ project.category }}" data-subcategory="{{ project.subcategory }}">
                        <a href="{% url 'core:project_detail' slug=project.slug %}" class="block">
                            <div class="futuristic-card group relative rounded-lg overflow-hidden">
                                <div class="relative h-[300px]">
                                    {% if project.images.first %}
                                        <img src="{{ project.images.first.image.url }}" alt="{{ project.title }}" class="w-full h-full object-cover">
                                    {% else %}
                                        <img src="{% static 'images/hero-about.jpg' %}" alt="{{ project.title }}" class="w-full h-full object-cover">
                                    {% endif %}
                                    <div class="absolute inset-0 bg-gradient-to-t from-primary/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                </div>
                                <div class="p-6">
                                    <h3 class="text-xl font-display mb-2 text-white">{{ project.title }}</h3>
                                    <p class="text-gray-400">{{ project.description|truncatechars:100 }}</p>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="relative py-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="max-w-[90rem] mx-auto">
                <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-900/30 to-purple-900/30 backdrop-blur-sm">
                    <!-- Background Elements -->
                    <div class="absolute inset-0 bg-[radial-gradient(circle_at_30%_50%,rgba(139,92,246,0.3),transparent_40%),radial-gradient(circle_at_70%_70%,rgba(14,165,233,0.3),transparent_40%)]"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-900/40 via-transparent to-purple-900/40"></div>
                    
                    <!-- Content -->
                    <div class="relative z-10 px-6 py-16 sm:px-12 sm:py-20 lg:px-16 lg:py-24">
                        <div class="text-center max-w-3xl mx-auto">
                            <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-6 text-gradient">Ready to Create Something Amazing?</h2>
                            <p class="text-lg sm:text-xl text-gray-300 mb-8">Let's transform your brand into an unforgettable experience.</p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <a href="#contact" class="bg-accent hover:bg-accent/80 text-primary rounded-full px-8 py-3 text-base font-medium transition-all hover:scale-105">Get in Touch</a>
                                <a href="{% url 'core:about' %}" class="border border-white/20 bg-white/5 hover:bg-white/10 text-white rounded-full px-8 py-3 text-base font-medium transition-all hover:scale-105">Learn More</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_css %}
<style>
    /* Portfolio Filter Styles */
    .filter-btn {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .filter-btn::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(100, 255, 218, 0.1);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .filter-btn:hover::after {
        width: 300px;
        height: 300px;
    }

    .filter-btn.active {
        background: rgba(100, 255, 218, 0.2);
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        transform: translateY(-2px);
    }

    .filter-btn.active::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        padding: 2px;
        background: linear-gradient(45deg, #64FFDA, #7B68EE);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
    }

    .sub-filter-btn {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .sub-filter-btn::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(100, 255, 218, 0.1);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .sub-filter-btn:hover::after {
        width: 300px;
        height: 300px;
    }

    .sub-filter-btn.active {
        background: rgba(100, 255, 218, 0.2);
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        transform: translateY(-2px);
    }

    .sub-filter-btn.active::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        padding: 2px;
        background: linear-gradient(45deg, #64FFDA, #7B68EE);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
    }

    /* Portfolio Item Hover Effects */
    .portfolio-item .futuristic-card {
        transition: transform 0.3s ease;
    }

    .portfolio-item .futuristic-card:hover {
        transform: translateY(-10px);
    }

    /* Animation Classes */
    .fade-in-up {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .fade-in-up.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Swipe Photos Animation */
    .swipe-photos {
        position: absolute;
        inset: 0;
        perspective: 1000px;
    }

    .swipe-photo {
        position: absolute;
        inset: 0;
        opacity: 0;
        transform: translateX(calc(100% * var(--direction))) scale(var(--scale));
        will-change: transform, opacity, z-index;
        z-index: 1;
    }

    .swipe-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(0.4) contrast(1.2);
        transform-origin: center;
        transition: transform 0.5s ease-out;
    }

    /* Initial animation for each photo */
    .swipe-photo:nth-child(1) { 
        animation: initialSwipe 5s forwards, randomMove1 15s infinite, cyclePhoto 25s infinite;
        animation-delay: 0s, 5s, 5s;
    }
    .swipe-photo:nth-child(2) { 
        animation: initialSwipe 5s forwards, randomMove2 18s infinite, cyclePhoto 25s infinite;
        animation-delay: 2s, 7s, 10s;
    }
    .swipe-photo:nth-child(3) { 
        animation: initialSwipe 5s forwards, randomMove3 20s infinite, cyclePhoto 25s infinite;
        animation-delay: 4s, 9s, 15s;
    }
    .swipe-photo:nth-child(4) { 
        animation: initialSwipe 5s forwards, randomMove4 17s infinite, cyclePhoto 25s infinite;
        animation-delay: 6s, 11s, 20s;
    }
    .swipe-photo:nth-child(5) { 
        animation: initialSwipe 5s forwards, randomMove5 19s infinite, cyclePhoto 25s infinite;
        animation-delay: 8s, 13s, 25s;
    }

    @keyframes initialSwipe {
        0% {
            opacity: 0;
            transform: translateX(calc(100% * var(--direction))) scale(var(--scale));
        }
        100% {
            opacity: 1;
            transform: translateX(0) scale(1);
        }
    }

    @keyframes cyclePhoto {
        0%, 19% { 
            opacity: 0;
            z-index: 1;
        }
        20%, 39% { 
            opacity: 1;
            z-index: 2;
        }
        40%, 100% { 
            opacity: 0;
            z-index: 1;
        }
    }

    @keyframes randomMove1 {
        0%, 100% { transform: translate(0, 0) rotate(0) scale(1); }
        25% { transform: translate(10%, -5%) rotate(5deg) scale(1.1); }
        50% { transform: translate(-8%, 8%) rotate(-8deg) scale(0.9); }
        75% { transform: translate(5%, 5%) rotate(3deg) scale(1.05); }
    }

    @keyframes randomMove2 {
        0%, 100% { transform: translate(0, 0) rotate(0) scale(1); }
        33% { transform: translate(-12%, 6%) rotate(-6deg) scale(1.15); }
        66% { transform: translate(8%, -8%) rotate(4deg) scale(0.85); }
    }

    @keyframes randomMove3 {
        0%, 100% { transform: translate(0, 0) rotate(0) scale(1); }
        20% { transform: translate(15%, 0) rotate(10deg) scale(1.2); }
        40% { transform: translate(-10%, 10%) rotate(-5deg) scale(0.8); }
        60% { transform: translate(5%, -15%) rotate(8deg) scale(1.1); }
        80% { transform: translate(-5%, 5%) rotate(-3deg) scale(0.9); }
    }

    @keyframes randomMove4 {
        0%, 100% { transform: translate(0, 0) rotate(0) scale(1); }
        25% { transform: translate(-15%, -10%) rotate(-12deg) scale(1.25); }
        50% { transform: translate(10%, 15%) rotate(6deg) scale(0.75); }
        75% { transform: translate(-5%, -5%) rotate(-4deg) scale(1.15); }
    }

    @keyframes randomMove5 {
        0%, 100% { transform: translate(0, 0) rotate(0) scale(1); }
        20% { transform: translate(8%, 12%) rotate(8deg) scale(1.3); }
        40% { transform: translate(-12%, -8%) rotate(-10deg) scale(0.7); }
        60% { transform: translate(15%, 5%) rotate(5deg) scale(1.2); }
        80% { transform: translate(-8%, -12%) rotate(-7deg) scale(0.8); }
    }

    /* Enhanced text effects */
    .parallax-text {
        transform: translateZ(0);
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform;
        animation: textFloat 8s infinite ease-in-out;
    }

    @keyframes textFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .text-gradient {
        animation: textFloat 8s infinite ease-in-out, glowPulse 4s infinite;
    }

    @keyframes glowPulse {
        0%, 100% { filter: brightness(1); }
        50% { filter: brightness(1.2); }
    }

    /* Parallax Text Effect */
    .parallax-content {
        transform-style: preserve-3d;
        perspective: 1000px;
        will-change: transform;
    }

    .parallax-text {
        transform: translateZ(0);
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: transform;
        animation: textFloat 8s infinite ease-in-out;
    }

    @keyframes textFloat {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .text-gradient {
        background: linear-gradient(45deg, #64FFDA, #7B68EE);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        display: inline-block;
    }

    .text-gradient::after {
        content: '';
        position: absolute;
        inset: -2px;
        background: linear-gradient(45deg, #64FFDA, #7B68EE);
        filter: blur(8px);
        opacity: 0.5;
        z-index: -1;
        transition: opacity 0.3s ease;
    }

    .text-gradient:hover::after {
        opacity: 0.8;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Filter functionality
        const filterButtons = document.querySelectorAll('.filter-btn');
        const portfolioItems = document.querySelectorAll('.portfolio-item');
        const brandSubcategories = document.getElementById('brand-subcategories');
        const communicationSubcategories = document.getElementById('communication-subcategories');
        const subFilterButtons = document.querySelectorAll('.sub-filter-btn');

        // Function to update active button styles
        function updateActiveButton(button, isSubFilter = false) {
            if (isSubFilter) {
                subFilterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.remove('bg-accent/20');
                });
                button.classList.add('active');
                button.classList.add('bg-accent/20');
            } else {
                filterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.remove('bg-accent/20');
                });
                button.classList.add('active');
                button.classList.add('bg-accent/20');
            }
        }

        // Function to show all items in a category
        function showAllInCategory(category) {
            portfolioItems.forEach(item => {
                if (item.getAttribute('data-category') === category) {
                    item.style.display = 'block';
                }
            });
        }

        // Main filter functionality
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                updateActiveButton(button);

                // Filter items
                const filter = button.getAttribute('data-filter');
                portfolioItems.forEach(item => {
                    if (filter === 'all' || item.getAttribute('data-category') === filter) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });

                // Show/hide subcategory filters
                if (filter === 'brand-identity') {
                    brandSubcategories.classList.remove('hidden');
                    communicationSubcategories.classList.add('hidden');
                    // Add "Show All" button if it doesn't exist
                    if (!document.querySelector('#brand-subcategories .show-all-btn')) {
                        const showAllBtn = document.createElement('button');
                        showAllBtn.className = 'sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all active';
                        showAllBtn.textContent = 'Show All';
                        showAllBtn.setAttribute('data-subfilter', 'all');
                        brandSubcategories.insertBefore(showAllBtn, brandSubcategories.firstChild);
                        showAllBtn.addEventListener('click', () => {
                            updateActiveButton(showAllBtn, true);
                            showAllInCategory('brand-identity');
                        });
                    }
                } else if (filter === 'communication-kits') {
                    brandSubcategories.classList.add('hidden');
                    communicationSubcategories.classList.remove('hidden');
                    // Add "Show All" button if it doesn't exist
                    if (!document.querySelector('#communication-subcategories .show-all-btn')) {
                        const showAllBtn = document.createElement('button');
                        showAllBtn.className = 'sub-filter-btn px-4 py-1 rounded-full bg-accent/5 hover:bg-accent/10 text-accent transition-all active';
                        showAllBtn.textContent = 'Show All';
                        showAllBtn.setAttribute('data-subfilter', 'all');
                        communicationSubcategories.insertBefore(showAllBtn, communicationSubcategories.firstChild);
                        showAllBtn.addEventListener('click', () => {
                            updateActiveButton(showAllBtn, true);
                            showAllInCategory('communication-kits');
                        });
                    }
                } else {
                    brandSubcategories.classList.add('hidden');
                    communicationSubcategories.classList.add('hidden');
                }

                // Reset subcategory buttons
                subFilterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.remove('bg-accent/20');
                });
            });
        });

        // Subcategory filtering
        subFilterButtons.forEach(button => {
            button.addEventListener('click', () => {
                const subfilter = button.getAttribute('data-subfilter');
                const activeCategory = document.querySelector('.filter-btn.active').getAttribute('data-filter');
                
                // Update active button
                updateActiveButton(button, true);

                // Filter items
                portfolioItems.forEach(item => {
                    const category = item.getAttribute('data-category');
                    const itemSubcategory = item.getAttribute('data-subcategory');
                    
                    if (category === activeCategory && itemSubcategory === subfilter) {
                        item.style.display = 'block';
                    } else if (category === activeCategory) {
                        item.style.display = 'none';
                    }
                });
            });
        });

        // Intersection Observer for scroll animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, {
            threshold: 0.1
        });

        document.querySelectorAll('.fade-in-up').forEach((el) => {
            observer.observe(el);
        });

        // Enhanced parallax effect for text and images
        const heroSection = document.querySelector('.relative.min-h-\\[70vh\\]');
        const parallaxTexts = document.querySelectorAll('.parallax-text');
        const swipePhotos = document.querySelectorAll('.swipe-photo img');

        heroSection.addEventListener('mousemove', (e) => {
            const { clientX, clientY } = e;
            const { left, top, width, height } = heroSection.getBoundingClientRect();
            
            const x = (clientX - left) / width - 0.5;
            const y = (clientY - top) / height - 0.5;

            // Move text with enhanced parallax
            parallaxTexts.forEach(text => {
                const speed = text.classList.contains('text-gradient') ? 25 : 20;
                const moveX = x * speed;
                const moveY = y * speed;
                text.style.transform = `translate3d(${moveX}px, ${moveY}px, 0)`;
            });

            // Move images with subtle parallax
            swipePhotos.forEach(img => {
                const speed = 10;
                const moveX = x * speed;
                const moveY = y * speed;
                img.style.transform = `translate3d(${moveX}px, ${moveY}px, 0) scale(1.05)`;
            });
        });

        // Reset transforms on mouse leave
        heroSection.addEventListener('mouseleave', () => {
            parallaxTexts.forEach(text => {
                text.style.transform = 'translate3d(0, 0, 0)';
            });
            swipePhotos.forEach(img => {
                img.style.transform = 'translate3d(0, 0, 0) scale(1)';
            });
        });
    });
</script>
{% endblock %} 